<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Projection</TITLE>
<META NAME="description" CONTENT="Projection">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="manual.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html3519" HREF="node122.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="./icons/next_motif.gif"></A> <A NAME="tex2html3517" HREF="node119.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="./icons/up_motif.gif"></A> <A NAME="tex2html3511" HREF="node120.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="./icons/previous_motif.gif"></A> <A NAME="tex2html3521" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="./icons/contents_motif.gif"></A> <A NAME="tex2html3522" HREF="node153.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="./icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html3520" HREF="node122.html">Viewport</A>
<B>Up:</B> <A NAME="tex2html3518" HREF="node119.html">Viewing and Graphics</A>
<B> Previous:</B> <A NAME="tex2html3512" HREF="node120.html">Viewing</A>
<BR> <P>
<H2><A NAME="SECTION04052000000000000000">Projection</A></H2>
<P>
Class <B>parallel-projection and perspective-projection</B> process
projection transformation, which is represented with a 4X4 matrix,
i.e., the transformation is taken in the three dimensional homogeneous
coordinates.
Class <B>projection</B> is an abstract class for both of these.
Since these projection classes inherit the viewing class,
two coordinates transformation, world-to-viewing and projection
can be performed at the same time.
By sending the <TT>:project3</TT> message with a 3D vector to a projection object,
a float-vector of four elements is returned.
<B>Homo2normal</B> function is used to convert this homogeneous vector
to the normal representation.
The result is a vector represented in so called normalized device coordinates
(NDC), in which a visible vector ranges within -1 to 1
in each of x,y, and z dimensions.
For the simulation of real cameras in a robot world,
the perspective projection is used more often than the parallel-projection.
Perspective-projection defines a few more parameters.
<TT>Screenx</TT> and <TT>screeny</TT> are the sizes of the window on the
viewing plane on which observed objects are projected,
and with the larger screen, the wider space is projected.
<TT>Viewdistance</TT> which defines the distance between the viewpoint
and the viewplane also concerns with the viewing angle.
The larger viewdistance maps the smaller region to the window on the view plane.
<TT>Hither</TT> and <TT>yon</TT> parameters determine the distance to the front and back
depth clipping planes.
Objects outside these two planes are clipped out.
Actually, this clipping procedure is performed by the viewport object.
<P>
<A NAME=18656>&#160;</A>
<B>projection </B> [class]  <PRE><TT> :super B<>viewing</B>
<P>
:slots 		 (screenx screeny hither yon projection-matrix)
<P>
</TT></PRE>
<UL><LI> defines projection transformation with a 4x4 matrix.
</UL>
<A NAME=18673>&#160;</A>
<B>:projection</B> <EM>&amp;optional pmat </EM>[method] 
<UL><LI> if <EM>pmat is given, it is set to the <EM>projection-matrix</EM> slot.
<B>:projection</B> returns the current 4x4 projection matrix.
</UL>
<A NAME=18686>&#160;</A>
<B>:project</B> <EM>vec </EM>[method] 
<UL><LI> <EM>Vec is a three-dimensional homogeneous float-vector of four elements.
<EM>Vec</EM> is transformed by projection-matrix,
and the resulted homogeneous representation is returned.
</UL>
<A NAME=18698>&#160;</A>
<B>:project3</B> <EM>vec </EM>[method] 
<UL><LI> <EM>Vec is a normal 3D float-vector.
<EM>Vec</EM> is homogenized and transformed by projection-matrix,
and the resulted homogeneous representation is returned.
</UL>
<A NAME=18710>&#160;</A>
<B>:view</B> <EM>vec </EM>[method] 
<UL><LI> applies viewing transformation and projection transformation to <EM>vec
successively.
The resulted homogeneous representation is returned.
</UL>
<A NAME=18721>&#160;</A>
<B>:screen</B> <EM>xsize (&amp;optional (ysize xsize)) </EM>[method] 
<UL><LI> changes the size of the viewing screen.
The larger the size, the wider view you get.
</UL>
<A NAME=18731>&#160;</A>
<B>:hither</B> <EM>depth-to-front-clip-plane </EM>[method] 
<UL><LI> determines the distance from the viewpoint to the front-clipping plane.
Objects before the front-clipping (hither) plane are clipped out.
</UL>
<A NAME=18741>&#160;</A>
<B>:yon</B> <EM>depth-to-back-clip-plane </EM>[method] 
<UL><LI> changes the distance between the viewpoint and
the back-clipping plane.
Objects behind the back-clipping (yon) plane are clipped out.
</UL>
<A NAME=18751>&#160;</A>
<B>:aspect</B> <EM>&amp;optional ratio </EM>[method] 
<UL><LI> Aspect ratio is the ratio between screen-y and screen-x.
If <EM>ratio is given,
the aspect ratio is changed by setting screen-y to screen-x * <EM>ratio.
<B>:aspect</B> returns the current aspect ratio.
</UL>
<A NAME=18764>&#160;</A>
<P> <IMG  ALIGN=BOTTOM ALT="emtabbing18765" SRC="img62.gif"  > <P>
<UL><LI> 
initializes viewing and projection.
</UL>
<A NAME=18777>&#160;</A>
<B>parallel-viewing </B> [class]  <PRE><TT> :super B<>projection</B>
<P>
:slots 		 ()
<P>
</TT></PRE>
<UL><LI> 
defines parallel projection.
<B>Hid</B> (the hidden-line elimination function)
cannot handle parallel projection.
</UL>
<A NAME=18795>&#160;</A>
<B>:make-projection</B> <EM></EM>[method] 
<UL><LI> </UL>
<A NAME=18807>&#160;</A>
<B>perspective-viewing </B> [class]  <PRE><TT> :super B<>projection</B>
<P>
:slots 		 (viewdistance)
<P>
</TT></PRE>
<UL><LI> defines a perspective projection transformation.
</UL>
<A NAME=18824>&#160;</A>
<B>:make-projection</B> <EM></EM>[method] 
<UL><LI> </UL>
<A NAME=18835>&#160;</A>
<B>:ray</B> <EM>u v </EM>[method] 
<UL><LI> returns the normalized direction-vector pointing (u,v) on
the normalized screen from the viewpoint.
</UL>
<A NAME=18845>&#160;</A>
<B>:viewdistance</B> <EM>&amp;optional vd </EM>[method] 
<UL><LI> Viewdistance is the distance between viewpoint and the screen.
If <EM>vd is given, it is set to viewdistance.
The viewdistance corresponds to the focal length of a camera.
The greater the viewdistance, the more zoomed-up view you get.
<B>:viewdistance</B> returns the current viewdistance.
</UL>
<A NAME=18857>&#160;</A>
<B>:view-angle</B> <EM>&amp;optional ang </EM>[method] 
<UL><LI> set screen size so that the prospective angle of the diagonal of the
screen becomes <EM>ang radian.
Note that angles somewhat between 20 degree (approx. 0.4 rad.)
and 50  degree  (0.9 rad.) can generate a natural perspective view.
Wider angle generates a skewed view, and narrower a flat view like
orthogonal (parallel) viewing.
<B>:view-angle</B> returns current or new view angle in radian.
</UL>
<A NAME=18869>&#160;</A>
<B>:zoom</B> <EM>&amp;optional scale </EM>[method] 
<UL><LI> If <EM>scale is given, the screen is changed relatively to the
current size by <EM>scale
(the viewdistance is unchanged).
If you give 0.5 for <EM>scale, you get two times as wide view as before.
<B>:zoom</B> returns new view angle in radian.
</UL>
<A NAME=18883>&#160;</A>
<B>:lookaround</B> <EM>alfa beta </EM>[method] 
<UL><LI> translates and rotates the viewpoint.
The center of rotation is taken at 
the midst of the hither plane and the yon plane on the viewline.
The viewing coordinates is rotated <EM>alfa radian around world's z-axis
and <EM>beta radian around x-axis locally.
<B>:lookaround</B> allows you to move around the object in the center of
viewing.
</UL>
<A NAME=18896>&#160;</A>
<B>:look-body</B> <EM>bodies </EM>[method] 
<UL><LI> changes view direction, screen sizes, and hither/yon so that all the
<EM>bodies fit in the viewport.
Viewpoint does not change.
View direction is chosen so that the viewing line penetrate the center
of the bounding box of all bodies.
</UL>
<A NAME=18907>&#160;</A>
<B>:init</B> <EM>&amp;key (:viewdistance 100.0) &amp;allow-other-keys </EM>[method] 
<UL><LI> </UL>
</EM></EM></EM></EM></EM></EM></EM></EM></EM></EM></EM></EM></EM></EM><HR><A NAME="tex2html3519" HREF="node122.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="./icons/next_motif.gif"></A> <A NAME="tex2html3517" HREF="node119.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="./icons/up_motif.gif"></A> <A NAME="tex2html3511" HREF="node120.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="./icons/previous_motif.gif"></A> <A NAME="tex2html3521" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="./icons/contents_motif.gif"></A> <A NAME="tex2html3522" HREF="node153.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="./icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html3520" HREF="node122.html">Viewport</A>
<B>Up:</B> <A NAME="tex2html3518" HREF="node119.html">Viewing and Graphics</A>
<B> Previous:</B> <A NAME="tex2html3512" HREF="node120.html">Viewing</A>
<P><ADDRESS>
<I>Hirofumi Nakagaki <BR>
Tue Mar 19 19:45:39 JST 1996</I>
</ADDRESS>
</BODY>
</HTML>
