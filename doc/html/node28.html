<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Blocks and Exits</TITLE>
<META NAME="description" CONTENT="Blocks and Exits">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="manual.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html2253" HREF="node29.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="./icons/next_motif.gif"></A> <A NAME="tex2html2251" HREF="node24.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="./icons/up_motif.gif"></A> <A NAME="tex2html2245" HREF="node27.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="./icons/previous_motif.gif"></A> <A NAME="tex2html2255" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="./icons/contents_motif.gif"></A> <A NAME="tex2html2256" HREF="node153.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="./icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html2254" HREF="node29.html">Iteration</A>
<B>Up:</B> <A NAME="tex2html2252" HREF="node24.html">Control Structures</A>
<B> Previous:</B> <A NAME="tex2html2246" HREF="node27.html">Local Functions</A>
<BR> <P>
<H2><A NAME="SECTION03034000000000000000">Blocks and Exits</A></H2>
<P>
<A NAME=1412>&#160;</A>
<B>block</B> <EM>tag {form}* </EM>[special] 
<UL><LI> makes a lexical block from which you can exit by <B>return-from</B>.
<EM>Tag is lexically scoped and is not evaluated.
</UL>
<A NAME=1424>&#160;</A>
<B>return-from</B> <EM>tag value </EM>[special] 
<UL><LI> exits the block labeled by <EM>tag.
<B>return-from</B> can be used to exit from a function or a method which
automatically establishes block labeled by its function or method name
surrounding the entire body.
</UL>
<A NAME=1436>&#160;</A>
<B>return</B> <EM>value </EM>[macro] 
<UL><LI> <TT>(return x)</TT> is equivalent to <TT>(return-from nil x)</TT>. This is
convenient to use in conjunction with <B>loop, while, do, dolist,</B>
and <B>dotimes</B> which implicitly establish blocks labeled NIL.
</UL>
<A NAME=1450>&#160;</A>
<B>catch</B> <EM>tag {form}* </EM>[special] 
<UL><LI> establishes a dynamic block from which you can exit and return a value
by <B>throw</B>. <EM>Tag is evaluated.
The list of all visible catch tags can be obtained by <TT>
sys:list-all-catchers</TT>.
</UL>
<A NAME=1463>&#160;</A>
<B>throw</B> <EM>tag value </EM>[special] 
<UL><LI> exits and returns <EM>value from a catch block.
<EM>tag and <EM>value</EM> are evaluated.
</UL>
<A NAME=1476>&#160;</A>
<B>unwind-protect</B> <EM>protected-form {cleanup-form}* </EM>[special] 
<UL><LI> After the evaluation of <EM>protected-form finishes,
<EM>cleanup-form</EM> is evaluated.
You may make a block or a catch block outside the <TT>unwind-protect</TT>.
Even <B>return-from</B> or <B>throw</B> is executed in <EM>protected-form</EM>
to escape from such blocks, <EM>cleanup-form</EM> is assured to be evaluated.
Also, if you had an error while executing <EM>protected-form</EM>,
<EM>cleanup-form</EM> would always be executed by <EM>reset</EM>.
</UL>
</EM></EM></EM></EM></EM></EM><BR> <HR>
<P><ADDRESS>
<I>Hirofumi Nakagaki <BR>
Tue Mar 19 19:45:39 JST 1996</I>
</ADDRESS>
</BODY>
</HTML>
