<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Customization of Toplevel</TITLE>
<META NAME="description" CONTENT="Customization of Toplevel">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="manual.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html2792" HREF="node72.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="./icons/next_motif.gif"></A> <A NAME="tex2html2790" HREF="node63.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="./icons/up_motif.gif"></A> <A NAME="tex2html2784" HREF="node70.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="./icons/previous_motif.gif"></A> <A NAME="tex2html2794" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="./icons/contents_motif.gif"></A> <A NAME="tex2html2795" HREF="node153.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="./icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html2793" HREF="node72.html">Miscelaneous Functions</A>
<B>Up:</B> <A NAME="tex2html2791" HREF="node63.html">Evaluation</A>
<B> Previous:</B> <A NAME="tex2html2785" HREF="node70.html">Process Image Saving</A>
<BR> <P>
<H2><A NAME="SECTION03098000000000000000">Customization of Toplevel</A></H2>
<P>
When EusLisp is invoked from Unix, execution is initiated by the toplevel
function bound to <B>*toplevel*</B>.
This function is <TT>eustop</TT> in <TT>eus</TT> and <TT>xtop</TT> in <TT>eusx</TT>.
You can change this toplevel function by specifying your own 
function to the third argument to <B>save</B>. <A NAME=9309>&#160;</A>
<P>
The toplevel function should be programmed to accept arbitrary number of
arguments.
Each argument on the command line is coerced to a string and transfered
to the toplevel function.
The program below repeatedly reads expressions from the file given by
the first argument and pretty-prints them to the second argument file.
<P>
<PRE>(defun pprint-copy (infile outfile)
  (with-open-file (in infile)
     (with-open-file (out outfile :direction :output)
        (let ((eof (cons nil nil)) (exp))
           (while (not (eq (setq exp (read in nil eof)) eof))
              (pprint exp out))))))
(defun pprint-copy-top (&amp;rest argv)
   (when (= (length argv) 2)
      (pprint-copy (first argv) (second argv))))</PRE>
<P>
Once you defined these functions in EusLisp, 
<TT>(save &quot;ppcopy&quot; &quot;&quot; 'pprint-copy-top)</TT> creates a unix executable command
named <TT>ppcopy</TT>.
<P>
In Solaris based EusLisp, the toplevel evaluator cannot change in this
manner, since <B>save</B> is not available.
Instead, edit <TT>lib/eusrt.l</TT> to define the custom toplevel evaluator
and set it to <B>*toplevel*</B>.
<TT>lib/eusrt.l</TT> defines initialization procedures evaluated
at every invocation of the EusLisp.
<P>
<BR> <HR>
<P><ADDRESS>
<I>Hirofumi Nakagaki <BR>
Tue Mar 19 19:45:39 JST 1996</I>
</ADDRESS>
</BODY>
</HTML>
