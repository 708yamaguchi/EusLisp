<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Objects</TITLE>
<META NAME="description" CONTENT="Objects">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="manual.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html2077" HREF="node15.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="./icons/next_motif.gif"></A> <A NAME="tex2html2075" HREF="node12.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="./icons/up_motif.gif"></A> <A NAME="tex2html2069" HREF="node13.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="./icons/previous_motif.gif"></A> <A NAME="tex2html2079" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="./icons/contents_motif.gif"></A> <A NAME="tex2html2080" HREF="node153.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="./icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html2078" HREF="node15.html">Class Hierarchy</A>
<B>Up:</B> <A NAME="tex2html2076" HREF="node12.html">Data Types</A>
<B> Previous:</B> <A NAME="tex2html2070" HREF="node13.html">Numbers</A>
<BR> <P>
<H2><A NAME="SECTION03012000000000000000">Objects</A></H2>
<P>
Every data  other than number is represented by an object which is allocated
in heap. 
Each memory cell of an object has the object header and fixed number of 
slots for object variables.
Since vectors may consist of arbitrary number of elements,
they have 'size' slot immediately after the header.
Fig. <A HREF="node14.html#ObjectFig">3</A> depicts the structures of object and vector, and their
header word.
Only the words indicated as <EM>slot</EM> and <EM>element</EM>
are accessible from users.
<P>
<P><A NAME="609">&#160;</A> <IMG  ALIGN=BOTTOM ALT="figure398" SRC="img6.gif"  > <BR>
<STRONG>Figure 3:</STRONG> <A NAME="ObjectFig">&#160;</A>Structures of object, vector, and object header<BR>
<P>
<P>
A header is composed of six fields.
Two MSB bits, <EM>m</EM> and <EM>b</EM>,
are used to indicate the side of the neighbor cell
in Fibonacci-buddy memory management.
There are three mark bits in the <EM>mark</EM> field, each of which
is used by the garbage collector to identify accessible cells,
by the printer to recognize circular objects in printing in <TT>#n=</TT> and
<TT>#n#</TT> notations,
and by <B>copy-object</B> to copy shared objects.
The <EM>elmt</EM> field discriminates one of seven possible data types
of vector elements, <EM>pointer, bit, character, byte, integer, float</EM>
and <EM>foreign-string</EM>.
Although <EM>elmt</EM> can be available in the class, 
it is provided in the header to make the memory manager independent of
the structure of a class and to make the element accessing faster.
The <EM>bid</EM> field represents the physical size of a memory cell.
31 different sizes up to 16 MB are represented by the five bits in this field.
The lower short word (16 bits) is used for the class id.
This is used to retrieve the class of an object via the system's class table.
This class id can be regarded as the type tag of traditional Lisps.
Currently only the lower 8 bits of the cid are used and the upper 8 bits
are ignored.
Therefore, the maximum number of classes is limited to 256, though
this limit can be raised up to 65536 by reconfiguring the EusLisp to allocate
more memory to the system's class table.
<P>
<HR><A NAME="tex2html2077" HREF="node15.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="./icons/next_motif.gif"></A> <A NAME="tex2html2075" HREF="node12.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="./icons/up_motif.gif"></A> <A NAME="tex2html2069" HREF="node13.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="./icons/previous_motif.gif"></A> <A NAME="tex2html2079" HREF="node1.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="./icons/contents_motif.gif"></A> <A NAME="tex2html2080" HREF="node153.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="./icons/index_motif.gif"></A> <BR>
<B> Next:</B> <A NAME="tex2html2078" HREF="node15.html">Class Hierarchy</A>
<B>Up:</B> <A NAME="tex2html2076" HREF="node12.html">Data Types</A>
<B> Previous:</B> <A NAME="tex2html2070" HREF="node13.html">Numbers</A>
<P><ADDRESS>
<I>Hirofumi Nakagaki <BR>
Tue Mar 19 19:45:39 JST 1996</I>
</ADDRESS>
</BODY>
</HTML>
